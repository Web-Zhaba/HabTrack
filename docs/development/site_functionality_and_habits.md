# Функциональность сайта и управление привычками

## 1. Общее описание функционала сайта

HabTrack — это современное Single Page Application (SPA) для отслеживания привычек, помогающее пользователям формировать полезные рутины и избавляться от вредных. Приложение предоставляет инструменты для планирования, мониторинга прогресса и анализа статистики.

### Основные возможности

*   **Дашборд**: Обзор текущего состояния, сводка активности за сегодня.
*   **Управление привычками**: Создание, редактирование, удаление и архивация привычек.
*   **Трекинг**: Отметка выполнения привычек в реальном времени.
*   **Статистика**: Подробная аналитика прогресса с графиками и тепловыми картами.
*   **Социальное взаимодействие**: Раздел "Друзья" для совместного трекинга (в разработке).
*   **Персонализация**: Настройка темы оформления, экспорт и импорт данных.

### Роли пользователей

В текущей версии реализована роль **Пользователь**:
*   Полный доступ к управлению своими привычками.
*   Просмотр личной статистики.
*   Управление настройками приложения.
*   Данные хранятся локально (`localStorage`), обеспечивая конфиденциальность.

### Основные сценарии использования

1.  **Создание новой привычки**: Пользователь добавляет привычку, указывая название, тип (бинарная или количественная), цель и визуальное оформление.
2.  **Ежедневный чек-ин**: Пользователь заходит в приложение и отмечает выполнение запланированных на сегодня действий.
3.  **Анализ прогресса**: Просмотр статистики за неделю/месяц для корректировки планов.
4.  **Управление данными**: Резервное копирование данных через экспорт/импорт в настройках.

---

## 2. Модуль управления привычками

### Свойства привычки

Каждая привычка описывается объектом `Habit` со следующими свойствами:

*   **`id`**: Уникальный идентификатор (UUID).
*   **`name`**: Название привычки (например, "Чтение", "Бег").
*   **`description`**: Подробное описание (опционально).
*   **`type`**: Тип привычки (`binary` или `quantitative`).
*   **`color`**: Цвет для визуализации (HEX или токен).
*   **`icon`**: Иконка для списка и карточек.
*   **`tags`**: Массив категорий/тегов (например, `["health", "sport"]`).
*   **`target`**: Числовая цель (для количественных привычек).
*   **`unit`**: Единица измерения (например, "км", "мин", "стаканов").
*   **`status`**: Текущий статус (`active` | `paused` | `archived`).
*   **`createdAt`**: Дата создания.

### Типы привычек

1.  **Бинарные (Binary)**:
    *   Простой принцип "Сделал / Не сделал".
    *   Пример: "Заправить кровать", "Не курить".
    *   Прогресс: 0% или 100%.

2.  **Количественные (Quantitative)**:
    *   Имеют измеримую цель.
    *   Пример: "Выпить 2 литра воды", "Прочитать 10 страниц".
    *   Прогресс: Вычисляется как `(текущее значение / цель) * 100%`.

### Система отслеживания и прогресса

*   **Логирование**: Каждое действие пользователя записывается в `HabitLog`.
*   **Дневной прогресс**: Отображается на карточке привычки в виде прогресс-бара.
*   **Стрики (Series)**: Подсчет непрерывных дней выполнения (функционал заложен в архитектуру).

### Визуализация статистики

*   **Тепловая карта (Heatmap)**: Календарное отображение активности (как GitHub contributions).
*   **Тренды**: Линейные графики выполнения привычек за период.
*   **Сравнение**: Диаграммы, позволяющие сравнить успешность выполнения разных привычек.

---

## 3. Техническая реализация

Приложение построено на стеке **React + TypeScript + Redux Toolkit**.

### Структура данных

#### Хранилище (Redux State)

Данные разделены на два основных слайса:

1.  **`habitsSlice`**: Хранит конфигурацию привычек.
    ```typescript
    interface HabitsState {
      items: Habit[];
      // ...
    }
    ```

2.  **`habitLogsSlice`**: Хранит историю выполнения.
    ```typescript
    interface HabitLog {
      id: string;
      habitId: string;
      date: string; // ISO Date string (YYYY-MM-DD)
      completed?: boolean;
      value?: number;
    }
    ```
    *Такое разделение позволяет эффективно хранить историю без дублирования данных о самой привычке.*

### Алгоритмы расчета

*   **Прогресс за день**:
    *   Фильтрация логов по `habitId` и текущей дате.
    *   Для бинарных: `completed ? 100 : 0`.
    *   Для количественных: `Math.min((value / target) * 100, 100)`.

*   **Персистенция данных**:
    *   Используется `localStorage` через подписку на изменения Redux Store (`store.subscribe`).
    *   Ключ хранилища: `habtrack-data`.

### API и Интеграции

*   В текущей версии используется **Local Storage API** как основная база данных.
*   Архитектура подготовлена для подключения REST API или Firebase (через async thunks в Redux).

---

## 4. Интерфейс пользователя

Интерфейс разработан с использованием методологии **Mobile First** и библиотеки компонентов **shadcn/ui** + **Tailwind CSS**.

### Экраны управления

1.  **Список привычек (`/habits`)**:
    *   Отображение в виде карточек (`HabitCard`) или списка.
    *   Фильтрация по тегам и поиск.
    *   Быстрые действия: чек-бокс для бинарных, кнопки `+/-` для количественных.

2.  **Модальное окно создания (`HabitCreateModal`)**:
    *   **Вкладки**: Выбор типа привычки.
    *   **Форма**: Название, описание, цель.
    *   **Визуализация**: `ColorSwatchPicker` для цвета, сетка иконок.
    *   **Анимации**: Использование `framer-motion` для плавных переходов полей.

3.  **Детальная страница (`/habit/:id`)**:
    *   Расширенная статистика по конкретной привычке.
    *   Календарь выполнения.
    *   История изменений.

### Элементы визуализации

*   **Animated Input**: Поля ввода с плавающими лейблами (SmoothUI).
*   **Progress Bar**: Анимированная полоса прогресса с цветовым кодированием.
*   **Charts**: Графики на базе библиотеки `Recharts` (адаптивные, с тултипами).

### Мобильная адаптация

*   Полностью отзывчивый дизайн.
*   Крупные элементы управления (кнопки, тачи) для удобства использования на сенсорных экранах.
*   Скрываемое боковое меню на мобильных устройствах (Drawer/Burger menu).
